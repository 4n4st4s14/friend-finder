<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Survey Questions</title>
  <script
    src="https://code.jquery.com/jquery-3.2.1.min.js"
    integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
    crossorigin="anonymous"></script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>


</head>

<body>

  <div class="container">

  <div class="row">
    <h1>Survey Questions</h1>
    <hr>
  </div>
    <h3>About You</h3>


    <form method="POST" role="form">

      <div class="form-group">
        <label for="name">Name (Required)</label>
        <input type="text" class="form-control" id="user_name" required>
      </div>

      <div class="form-group">
        <label for="role">Link to Photo Image (Required)</label>
        <input type="text" class="form-control" id="user_photo" required>
      </div>
        <br>
      <h4>Question 1</h4>
      <h6>No need to hurry. No need to sparkle. No need to be anybody but oneself.</h6>
      <select data-placeholder="" class="chosen-select" id="q1" >
        <option value></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2 </option>
        <option value="3">3 </option>
        <option value="4">4 </option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
        <br>
      <h4>Question 2</h4>
      <h6>It is absurd to divide people into good and bad. People are either charming or tedious.</h6>
      <select data-placeholder="" class="chosen-select" id="q2" >
        <option value></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2 </option>
        <option value="3">3 </option>
        <option value="4">4 </option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
        <br>
      <h4>Question 3</h4>
      <h6>Nature is to zoos as God is to churches.</h6>
      <select data-placeholder="" class="chosen-select" id="q3" >
        <option value></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2 </option>
        <option value="3">3 </option>
        <option value="4">4 </option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
        <br><br>
      <h4>Question 4</h4>
      <h6>Respect was invented to cover the empty place where love should be.</h6>
      <select data-placeholder="" class="chosen-select" id="q4" >
        <option value></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2 </option>
        <option value="3">3 </option>
        <option value="4">4 </option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
        <br><br>
      <h4>Question 5</h4>
      <h6>Logical validity is not a guarantee of truth.</h6>
      <select data-placeholder="" class="chosen-select" id="q5" >
        <option value></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2 </option>
        <option value="3">3 </option>
        <option value="4">4 </option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
        <br><br>
      <h4>Question 6</h4>
      <h6>The path is revealed in the treading.</h6>
      <select data-placeholder="" class="chosen-select" id="q6" >
        <option value></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2 </option>
        <option value="3">3 </option>
        <option value="4">4 </option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
        <br><br>
      <h4>Question 7</h4>
      <h6>In the beginning the Universe was created.
This has made a lot of people very angry and been widely regarded as a bad move.</h6>
      <select data-placeholder="" class="chosen-select" id="q7" >
        <option value></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2 </option>
        <option value="3">3 </option>
        <option value="4">4 </option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
        <br><br>
      <h4>Question 8</h4>
      <h6>The secret to good self esteem is to lower your expectations to the point where they're already met.</h6>
      <select data-placeholder="" class="chosen-select" id="q8" >
        <option value></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2 </option>
        <option value="3">3 </option>
        <option value="4">4 </option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
        <br><br>
      <h4>Question 9</h4>
      <h6>If you are immune to boredom, there is literally nothing you cannot accomplish.</h6>
      <select data-placeholder="" class="chosen-select" id="q9" >
        <option value></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2 </option>
        <option value="3">3 </option>
        <option value="4">4 </option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
        <br><br>
      <h4>Question 10</h4>
      <h6>The truth will set you free, but not until it's finished with you.</h6>
      <select data-placeholder="" class="chosen-select" id="q10" >
        <option value></option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2 </option>
        <option value="3">3 </option>
        <option value="4">4 </option>
        <option value="5">5 (Strongly Agree)</option>

      </select>
<br>
<br>
      <button type="submit" class="btn btn-primary submit" class="submit">Submit</button>
<br>
<br>
<footer class="footer text-center">
  <p><a href="/api/friends">API Friends List</a>  |  <a href="">GitHub Repo</a>  <br>By Anastasia Lucas</p>
</footer>
    </form>

  </div>
<!--start modal -->
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">x</button>
        <h2 class="modal-title"><strong>Best Friend</strong></h2>
      </div>

      <div class="modal-body">
        <h2 id="friendName"></h2>
        <img id="friendImg" src="" alt="">
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>


  <script type="text/javascript">

  //modal code

  var config = {
  '.chosen-select': {},
  '.chosen-select-deselect': {
    allow_single_deselect: true
  },
  '.chosen-select-no-single': {
    disable_search_threshold: 10
  },
  '.chosen-select-no-results': {
    no_results_text: 'Oops, nothing found!'
  },
  '.chosen-select-width': {
    width: "50%"
  }
}

//on click, create object for quiz results
  $(".submit").on("click", function(event){
    event.preventDefault();

    //validate format
    function validate(){

      var valid = true;

      $('.form-control').each(function(){
        if ($(this).val()=== "")
        valid = false;
      })
      return valid;
}

if(validate()== true){


var userData = {
        name: $('#user_name').val().trim(),
        photo: $('#user_photo').val().trim(),
        scores : [$('#q1').val(), $('#q2').val(),$('#q3').val(),$('#q4').val(),$('#q5').val(), $('#q6').val(),$('#q7').val(),$('#q8').val(),$('#q9').val(),$('#q10').val(),]
      }
      console.log(userData);
      //grab url
      var currentURL = window.location.origin;
        console.log(currentURL);
      //post to friends.js

      $.post(currentURL + "/api/friends", userData, function(data){
        //  friendArr.push(userData);
          $('#friendName').text(data.name);
          $('#friendImg').attr("src", data.photo);
          $('#modal').modal('toggle');
          //res.json(userData);
      });
    } else {
      alert("Please complete the questionaire before submitting!");
    }

  return false;
  });


  </script>
</body>
</html>
